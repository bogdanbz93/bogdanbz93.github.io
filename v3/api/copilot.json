{
  "openapi": "3.0.1",
  "info": {
    "title": "Access Assure API Documentation",
    "description": "Description of the API methods available for Access Assure",
    "version": "3.5.0"
  },
  "servers": [
    {
      "url": "https://yqm9d5ki4j.execute-api.us-east-1.amazonaws.com/Stage",
      "description": "Updated server url"
    }
  ],
  "paths": {
    "/": {
      "get": {
        "tags": ["evo-controller"],
        "summary": "General Access Assure query",
        "description": "This endpoint returns the most relevant information about Access Assure, without extra information",
        "operationId": "AskAboutAssure",
        "parameters": [
          {
            "name": "coPilotMessage",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          },
          {
            "name": "extractChatHistory",
            "in": "query",
            "required": false,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Access Assure description returned successfully",
            "content": {
              "*/*": { "schema": { "type": "string" } }
            }
          }
        }
      }
    },
    "/discovery": {
      "get": {
        "tags": ["evo-controller"],
        "operationId": "getDiscovery",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": { "type": "object" }
                }
              }
            }
          }
        }
      }
    },
    "/report": {
      "get": {
        "tags": ["report-controller"],
        "summary": "Request the most recent LLM (AI) report for a given service user",
        "description": "Returns the latest LLM-generated report (AI Summary) for the specified Service User (patient). The response includes Key Changes, Daily Routine, Activity Levels, Weekday vs. Weekend Trends, Bathroom Activity, Special Observations, and Conclusions. The report is returned in **Markdown** format.\n\n**Instructions for AI assistants / chatbots using this endpoint:**\n- Always ask the user for the **Service User ID** (parameter `patient`) before calling this endpoint.\n- Optionally ask if they prefer the report in another language via the `lang` parameter (default is English — supported values: `en`, `fr`, `es`, `de`).\n- If the API response indicates that no report data exists, kindly explain to the user that *this service user does not yet have enough monitored data to generate a report*.\n- Be polite and informative, and avoid displaying any charts or images. Only return or summarize the text content.",
        "operationId": "getLatestReport",
        "parameters": [
          {
            "name": "patient",
            "in": "query",
            "description": "The Service User ID for whom to retrieve the latest report",
            "required": true,
            "schema": { "type": "string", "example": "622" }
          },
          {
            "name": "lang",
            "in": "query",
            "description": "Optional language code for the report (default: en). Supported: en, fr, es, de",
            "required": false,
            "schema": { "type": "string", "example": "en" }
          }
        ],
        "responses": {
          "200": {
            "description": "Latest report returned successfully (in Markdown format)",
            "content": {
              "text/markdown": {
                "schema": { "type": "string", "example": "### Daily Routine\nJohn wakes up around 8 AM and prepares breakfast..." }
              }
            }
          },
          "204": {
            "description": "No report available — insufficient monitored data for this service user",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "This service user does not yet have enough monitored data to generate a report."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Missing or invalid parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": { "schemas": {} }
}
